<script>
	function createButtonClicked(button) {
		if($("#inputForm").is(":visible")) {
			$("#inputForm").hide();
			button.value = "Add item";
		}
		else {
			$("#inputForm").show();
			button.value = "Hide data";
		}
	}
	function submitItem() {
		title = document.getElementById("title").value;
		details = document.getElementById("details").value;
		due_date = document.getElementById("due_date").value;
		resources = document.getElementById("resources").value;
		
		if(title == "")
			alert("Insert a value for Titles");
		else if(details == "")
			alert("Insert a value for Details");
		else if(due_date == "")
			alert("Insert a value for Due Date");
		else if(resources == "")
			alert("Insert a value for Resources");
		else {
			document.getElementById("title").value = "";
			document.getElementById("details").value = "";
			document.getElementById("due_date").value = "";
			document.getElementById("resources").value = "";
		}
	}
	
</script>

<body onload="createButtonClicked()">
  <div class="container">
  
  <input type="button" class="btn btn-default" style="margin-top:8px;" id="button" value="Add item" onclick="createButtonClicked(this)"></input>
	<div id="inputForm" name="inputForm">
		<table width=500>
		<tr>
			<th><%= label_tag(:title, "Title") %></th>
			<th><input id="title" name="title" type="text" value=""/></th>
			<th><%= label_tag(:details, "Details") %></th>
			<th><input id="details" name="details" type="text" value=""/></th>
		</tr>
		<tr>
			<th><%= label_tag(:due_date, "Due Date") %></th>
			<th><input id="due_date" name="due_date" type="text" value=""/></th>
			<th><%= label_tag(:Resources, "Resources") %></th>
			<th><input id="resources" name="resources" type="text" value=""/></th>
		</table>
		<button type="upload-doc-button" class="btn btn-default" style="margin-top:8px;" onclick="submitItem()">Submit</button>
	</div>
  
  <table class="table">
    <thead>
          <tr>
            <th>Title</th>
            <th>Details</th>
            <th>Due Date</th>
            <th>Resources</th>
            <th>Completed</th>
          </tr>
        </thead>
        
        <tbody>
          <% getTodoItems("/").each do |item| %>
              <tr>
                <td><%= item.title -%></td>
                <td><%= item.details -%></td>
                <td><%= item.date -%></td>
                
                <td>
                <% if !(item.resources.nil? || item.resources.empty?) -%>
                	  <a href="http://<%= item.resources -%>"><%= item.resources -%></a><br>
                <% end %>
                </td>
                
                <td><label>
                <% if item.completed %>
                  <input type="checkbox" checked>
                <% else %>
                  <input type="checkbox">
                <% end %>
                </label></td>
                
              </tr>
          <% end %>
        </tbody>
  </table>
